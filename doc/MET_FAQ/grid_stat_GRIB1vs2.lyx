#LyX 2.1 created this file. For more info see http://www.lyx.org/
\lyxformat 474
\begin_document
\begin_header
\textclass book
\use_default_options true
\maintain_unincluded_children false
\language english
\language_package default
\inputencoding auto
\fontencoding global
\font_roman default
\font_sans default
\font_typewriter default
\font_math auto
\font_default_family default
\use_non_tex_fonts false
\font_sc false
\font_osf false
\font_sf_scale 100
\font_tt_scale 100
\graphics default
\default_output_format default
\output_sync 0
\bibtex_command default
\index_command default
\paperfontsize default
\spacing single
\use_hyperref false
\papersize default
\use_geometry false
\use_package amsmath 1
\use_package amssymb 1
\use_package cancel 1
\use_package esint 1
\use_package mathdots 1
\use_package mathtools 1
\use_package mhchem 1
\use_package stackrel 1
\use_package stmaryrd 1
\use_package undertilde 1
\cite_engine basic
\cite_engine_type default
\biblio_style plain
\use_bibtopic false
\use_indices false
\paperorientation portrait
\suppress_date false
\justification true
\use_refstyle 1
\index Index
\shortcut idx
\color #008000
\end_index
\secnumdepth 3
\tocdepth 3
\paragraph_separation indent
\paragraph_indentation default
\quotes_language english
\papercolumns 1
\papersides 1
\paperpagestyle default
\tracking_changes false
\output_changes false
\html_math_output 0
\html_css_as_file 0
\html_be_strict false
\end_header

\begin_body

\begin_layout Section
GRIB1 vs GRIB2 files using the Grid-Stat tool
\end_layout

\begin_layout Standard
In this example, there is a problem running data though the grid_stat tool.
 The problem is due to the suffix of those files.
 MET interprets .gb, .grb, and .grib to be GRIB1 files and .gb2, .grb2, and .grib2
 to be GRIB2 files.
 So it's trying to read a GRIB2 file as a GRIB1 file.
\end_layout

\begin_layout Standard
Here are some choices for fixing this...
\end_layout

\begin_layout Enumerate
Change the .grb suffix to .grb2.
\end_layout

\begin_layout Enumerate
Edit the config file to explicitly state that this is a GRIB2 file, like
 this: 
\end_layout

\begin_layout LyX-Code
file_type = GRIB2;
\end_layout

\begin_layout Standard
That'll get past that error, but here's the next problem: 
\end_layout

\begin_layout LyX-Code
WARNING: process_scores() -> APCP/A24 not found in file: for.grb
\end_layout

\begin_layout Standard
Typically precipitation is encoded in GRIB files as an accumulation from
 time 1 to time 2.
 However, if the data is stored as an instantaneous forecast value...
 not an accumulation interval.
\end_layout

\begin_layout Standard
To troubleshoot try the following settings: name = "APCP"; level = "Z0";
\end_layout

\begin_layout Standard
But that didn't match it either.
 Using wgrib2 to look at the level value for this data, look at the following:
 
\end_layout

\begin_layout LyX-Code
wgrib2 -Sec4 for.grb2 1:0:Sec4 len=34 #vert coordinate=0 Product Defn 
\backslash

\end_layout

\begin_layout LyX-Code
Template=4.0 size=34 free=0 lvl1=1 scale=-127 val=-2147483647
\end_layout

\begin_layout Standard
MET is parsing the level value for this data as -2147483647.
 Is this data is encoded in GRIB correctly? Where did it come from?
\end_layout

\begin_layout Standard
Again, two options...
\end_layout

\begin_layout Enumerate
Set the level value to "R1" to use the first record: name = "APCP"; level
 = "R1";
\end_layout

\begin_layout Enumerate
It looks like converting from GRIB2 to GRIB1 makes the file behave better:
 
\end_layout

\begin_layout Quotation
cnvgrib -g21 for.grb2 for.grb cnvgrib -g21 obs.grb2 obs.grb
\end_layout

\begin_layout Standard
And then use: 
\end_layout

\begin_layout LyX-Code
name = "APCP"; 
\end_layout

\begin_layout LyX-Code
level = "Z0";
\end_layout

\end_body
\end_document
