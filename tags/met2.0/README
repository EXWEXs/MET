Model Evaluation Tools METv2.0 (April 07, 2009)

================================================================================
Model Evaluation Tools (MET) TERMS OF USE - IMPORTANT!
================================================================================

USE OF THIS SOFTWARE IS SUBJECT TO THE FOLLOWING TERMS AND CONDITIONS:

1. License.  Subject to these terms and conditions, University Corporation for
   Atmospheric Research (UCAR) grants you a non-exclusive, royalty-free license
   to use, create derivative works, publish, distribute, disseminate, transfer,
   modify, revise and copy the Model Evaluation Tools (MET) software, in both
   object and source code (the Software).

   You shall not sell, license or transfer for a fee the Software, or any work
   that in any manner contains the Software.

2. Disclaimer of Warranty on Software.  Use of the Software is at your sole
   risk.  The Software is provided "AS IS" and without warranty of any kind and
   UCAR EXPRESSLY DISCLAIMS ALL WARRANTIES AND/OR CONDITIONS OF ANY KIND,
   EXPRESS OR IMPLIED, INCLUDING, BUT NOT LIMITED TO, ANY WARRANTIES OR
   CONDITIONS OF TITLE, NON-INFRINGEMENT OF A THIRD PARTY'S INTELLECTUAL
   PROPERTY, MERCHANTABILITY OR SATISFACTORY QUALITY AND FITNESS FOR A
   PARTICULAR PURPOSE.  THE PARTIES EXPRESSLY DISCLAIM THAT THE UNIFORM COMPUTER
   INFORMATION TRANSACTIONS ACT (UCITA) APPLIES TO OR GOVERNS THIS AGREEMENT.
   No oral or written information or advice given by UCAR or a UCAR authorized
   representative shall create a warranty or in any way increase the scope of
   this warranty.  Should the Software prove defective, you (and neither UCAR
   nor any UCAR representative) assume the cost of all necessary correction.

3. Limitation of Liability.  UNDER NO CIRCUMSTANCES, INCLUDING NEGLIGENCE, SHALL
   UCAR BE LIABLE FOR ANY DIRECT, INCIDENTAL, SPECIAL, INDIRECT OR CONSEQUENTIAL
   DAMAGES INCLUDING LOST REVENUE, PROFIT OR DATA, WHETHER IN AN ACTION IN
   CONTRACT OR TORT ARISING OUT OF OR RELATING TO THE USE OF OR INABILITY TO USE
   THE SOFTWARE, EVEN IF UCAR HAS BEEN ADVISED OF THE POSSIBILITY OF SUCH
   DAMAGES.

4. Compliance with Law.  All Software and any technical data delivered under
   this Agreement are subject to U.S. export control laws and may be subject to
   export or import regulations in other countries.  You agree to comply
   strictly with all applicable laws and regulations in connection with use and
   distribution of the Software, including export control laws, and you
   acknowledge that you have responsibility to obtain any required license to
   export, re-export, or import as may be required.

5. No Endorsement/No Support.  The names UCAR/NCAR, National Center for
   Atmospheric Research and the University Corporation for Atmospheric Research
   may not be used in any advertising or publicity to endorse or promote any
   products or commercial entity unless specific written permission is obtained
   from UCAR.  The Software is provided without any support or maintenance, and
   without any obligation to provide you with modifications, improvements,
   enhancements, or updates of the Software.

6. Controlling Law and Severability.  This Agreement shall be governed by the
   laws of the United States and the State of Colorado.  If for any reason a
   court of competent jurisdiction finds any provision, or portion thereof, to
   be unenforceable, the remainder of this Agreement shall continue in full
   force and effect.  This Agreement shall not be governed by the United Nations
   Convention on Contracts for the International Sale of Goods, the application
   of which is hereby expressly excluded.

7. Termination.  Your rights under this Agreement will terminate automatically
   without notice from UCAR if you fail to comply with any term(s) of this
   Agreement.  You may terminate this Agreement at any time by destroying the
   Software and any related documentation and any complete or partial copies
   thereof.  Upon termination, all rights granted under this Agreement shall
   terminate.  The following provisions shall survive termination: Sections 2, 3,
   6 and 9.

8. Complete Agreement.  This Agreement constitutes the entire agreement between
   the parties with respect to the use of the Software and supersedes all prior
   or contemporaneous understandings regarding such subject matter.  No
   amendment to or modification of this Agreement will be binding unless in
   writing and signed by UCAR.

9. Notices and Additional Terms.  Copyright in Software is held by UCAR. You
   must include, with each copy of the Software and associated documentation,
   a copy of this Agreement and the following notice:

   "The source of this material is the Research Applications Laboratory at the
   National Center for Atmospheric Research, a program of the University
   Corporation for Atmospheric Research (UCAR) pursuant to a Cooperative
   Agreement with the National Science Foundation; Copyright 2007 University
   Corporation for Atmospheric Research.  All Rights Reserved."

   The following notice shall be displayed on any scholarly works associated
   with, related to or derived from the Software:

   "Model Evaluation Tools (MET) was developed at the National Center for
   Atmospheric Research (NCAR) through a grant from the United States Air Force
   Weather Agency (AFWA).  NCAR is sponsored by the United States National
   Science Foundation."

By using or downloading the Software, you agree to be bound by the terms and
conditions of this Agreement.

================================================================================
This is the main directory for the Model Evalution Tools source code release.
================================================================================

For questions, please refer to the MET User's Guide in the /doc subdirectory or
send mail to met_help@ucar.edu.

Dependencies
------------

- MET requires the following to be installed on your system prior to building:
   - NCEP's BUFRLIB Library
      - http://www.nco.ncep.noaa.gov/sib/decoders/BUFRLIB
   - UniData's NetCDF Library version 3
      - http://www.unidata.ucar.edu/software/netcdf
   - GNU Scientific Library (GSL), developer's version
      - http://www.gnu.org/software/gsl
   - The F2C (or G2C) library for interfacing between fortran and C code
      - Not needed for PGI or GNU-gfortran compiler.
      - http://www.netlib.org/f2c

- It is suggested that the following tools be used in conjunction with MET:
   - WRF Post-Processor
      - http://www.dtcenter.org/wrf-nmm/users
   - The "copygb" utility distributed with the WRF Post-Processor

NOTE: The required libraries should be compiled with the same set of compilers
      to be used in compiling MET.

How to compile and run?
-----------------------

For more detailed instructions on building MET and for a list of supported
platforms and compilers, please refer to the MET User's Guide in the doc/
subdirectory.

- In the top level directory, sample Makefiles are provided for compiling with
  GNU, PGI, Intel, or IBM compilers.  Make a copy of appropriate Makefile.
  For example:

   - cp Makefile_gnu Makefile

- Next, configure the Makefile as follows:
   - Set "MAKE" to the full path for the GNU Make utility.
   - Set "ARCH_FLAGS" architecture flags as needed.

   - Set "CXX" to the full path for your C++ compiler
     (recommend GNU g++, PGI pgCC, or IBM xlC).
   - Set "CXX_FLAGS" to the C++ compiler flags to be used.
   - Set "CXX_LIBS" to link to any additional libraries required for the C++
     compiler.

   - Set "FC" to the full path for your Fortran compiler
     (recommend GNU g77/gfortran, PGI pgf77, or IBM xlf).
   - Set "FC_FLAGS" to the Fortran compiler flags to be used.
   - Set "FC_LIBS" to link to any additional libraries required for the Fortran
     compiler.

   - Set "PRINT_OPTS" to the print options to be used for make.

   - Set "NETCDF_BASE", "NETCDF_INCS", and "NETCDF_LIBS" to point to the
     location of the NetCDF library.

   - Set "BUFR_BASE", "BUFR_INCS", and "BUFR_LIBS" to point to the location
     of the BUFRLIB library.

   - Set "GSL_BASE", "GSL_INCS", and "GSL_LIBS" to point to the location of the
     GSL library.

   - Set "F2C_BASE", "F2C_INCS", "F2C_LIBS", and "F2C_LIBNAME" to point to the
     location of the F2C library.  Or leave empty for compilers which do not
     require it, such as GNU gfortran and PGI pgf77.

- Type 'make >& make_met.log &'

- Type 'tail -f make_met.log' to view the execution of the make.

- When make is finished, type 'CNTRL-C' to quit the tail.

- If sucessful, this will create 10 executables in the bin directory:
   - ascii2nc
   - gen_poly_mask
   - grid_stat
   - mode
   - mode_analysis
   - pb2nc
   - pcp_combine
   - point_stat
   - stat_analysis
   - wavelet_stat

- Type 'ls bin' to check for the presence of the 10 executables.

- Type 'cd scripts' to enter the scripts directory

- Type './test_all.sh >& test_all.log &' to run all of the test scripts in the
  directory.  These test scripts use test data supplied with the tarball.  For
  instructions on running your own data, please refer to the MET User's Guide.

- Type 'tail -f test_all.log' to view the execution of the test script.

- When the test script is finished, type 'CNTRL-C' to quit the tail.

- Look in ../out to find the output files for these tests.

================================================================================
Release Notes
================================================================================

Version 2.0 Release Notes:
-------------------------

- Build process
   - Add sample Makefile for building MET with Intel compilers.

- Library code
   - Restructure and rename output ASCII file format from VSDB to STAT and add
     output columns to store data in a more straight-forward way.
   - Enable more sophisticated masking for the Point-Stat, Grid-Stat, and MODE
     tools by reading the output of the Gen-Poly-Mask tool or any other gridded
     data field and, optionally, thresholding that field to define a masking
     region.

- ASCII2NC
   - Fix bug so that observations values from the same observing location are
     assigned the same header id.

- PB2NC
   - Remove requirement that PrepBufr files be Fortran-blocked prior to running
     through PB2NC.  The blocking is now done internally as specified in the
     ARCH_FLAGS in the top-level MET Makefile.  The "-DBLOCK4" flag indicates
     that 4-byte blocking should be performed instead of the default 8-byte
     blocking.  This is compiler-dependent.  The sample Makefiles contain a
     best guess for each compiler, but if you experience runtime errors from the
     PB2NC tool try adding or removing the "-DBLOCK4" flag, recompiling, and
     rerunning.
   - Running the PB2NC tool, which links to the BUFRLIB library, on 64-bit
     machines continues to be problematic.  Users may continue to build MET and
     the libraries on which it depends as 32-bit on 64-bit machines.  MET users
     will be notified when the BUFRLIB 64-bit issues are resolved.

- Gen-Poly-Mask
   - New for this release.

- PCP-Combine
   - Add the "-ptv" command line argument to specify which GRIB parameter table
     version number should be used.

- Grid-Stat
   - Modify how the user specifies the forecast and observation fields to be
     selected, thresholded, and compared.  The user can now select them
     independently and compare two different fields.
   - Add the option of specifying a level for a GRIB record as 'L', meaning any
     generic level type, as opposed to specifying a pressure level or vertical
     level.
   - Add support for verifying probabilistic forecasts and add new output line
     types to store the output.  Probablistic data may have a range of values
     of [0, 1] or [0, 100].  However, probablistic data with a range of [0, 100]
     will first be rescaled to [0, 1] before verifying it.
   - Add configurable wind speed threshold parameters to specify which (U, V)
     points should be included in the VL1L2 partial sums.
   - Change the "ncep_defaults" configurable parameter to "grib_ptv" to specify
     which GRIB parameter table version number should be used.
   - Add an "output_prefix" configurable parameter to include a user-specified
     string in the output file names.

- Point-Stat
   - Same as Grid-Stat, see above.

- Wavelet-Stat
   - New for this release.

- STAT-Analysis
   - Rename the VSDB-Analysis tool to the STAT-Analysis tool and modify it to
     read the STAT output lines from the other MET tools.
   - Simplify names for jobs.
   - Add support for converting VL1L2 STAT lines into information about wind
     direction errors.
   - Add support for reading and aggregating the ISC STAT line from the
     Wavelet-Stat tool.
   - Add support for reading and aggregating the new probability STAT line
     types (PCT, PSTD, PJC, and PRC) from the Grid-Stat and Point-Stat tools.

- MODE
   - Change the "ncep_defaults" configurable parameter to "grib_ptv" to specify
     which GRIB parameter table version number should be used.
   - Add an "output_prefix" configurable parameter to include a user-specified
     string in the output file names.
   - Modify the output PostScript file to include new summary measures on the
     first page and add a page listing out the pairwise attributes of the
     matched cluster (formerly called "composite") objects.
   - Add a column to the MODE output files for the VERSION number of MODE that
     generated the file.
   - Add a column to the MODE output files for the AREA_THRESH value.

- MODE-Analysis
   - Modify to read the latest MODE output columns.

Version 1.1 Release Notes:
-------------------------

- Build process
   - Add support for building MET on an IBM and provide a sample IBM Makefile.
   - Add support for use of the GNU gfortran compiler.
   - Supply compiler flags for building MET as a 32-bit executable on 64-bit
     machines.
   - Reorganize Makefile configuration process.
   - Remove several compilation warning messages.

- Library code
   - Several bug fixes.
   - Allow the use of environment variables in the configuration files.
   - Improve the algorithm for computing percentiles to include interpolating
     between values when necessary.

- PB2NC
   - Add "-pbfile" command line option to process multiple PREPBUFR files.
   - Add the "-valid_beg" and "-valid_end" command line options to explicitly
     set the retention time window.
   - Simplify format of the output NetCDF file by removing variables that are
     not used by Point-Stat.

- ASCII2NC
   - Add new tool for converting ASCII observations to NetCDF for input into
     Point-Stat.

- PCP-Combine
   - Add "-add" command line option to add together accumulation intervals
     from two Grib files directly.
   - Add "-subtract" command line option to take the difference of accumulation
     intervals from two Grib files directly.
   - Add "-gc" command line option to allow the user to specify which grib
     code to use.

- Point-Stat
   - Add "-ncfile" command line option to process multiple NetCDF point
     observation files.
   - Add the ability to dump out the matched pair data (forecast, observation,
     climatology) directly to ASCII and VSDB files.
   - Add output matched pair (MPR) line type to store matched pair data.
   - Compute bootstrap confidence intervals for the Contingency Table Statistics
     (CTS) and Continuous Statistics (CNT) line types.
   - Add 5 parameters to the configuration file for options related to computing
     bootstrap confidence intervals.
   - Add "rank_corr_flag" configuration parameter to disable the computation of
     Spearman's Rank Correlation Coefficient and Kendall's Tau Correlation
     Coefficient to improve runtime performance.
   - Add "tmp_dir" configuration parameter to specify the directory where
     temporary files should be written by Point-Stat.
   - Allow the "mask_grids" configuration parameter to be set to "FULL" to
     indicate that statistics should be computed over the entire domain.

- Grid-Stat
   - Add the ability to perform neighborhood verification.
   - Add 3 parameters to the configuration file for options related to
     neighborhood verification.
   - Add 3 output line types related to neighborhood verification:
     Neighborhood Contingency Table Counts (NBRCTC)
     Neighborhood Contingency Table Statistics (NBRCTS)
     Neighborhood Continuous Statistics (NBRCNT)
   - Compute bootstrap confidence intervals for the Contingency Table Statistics
     (CTS and NBRCTS) and Continuous Statistics (CNT and NBRCNT) line types.
   - Add 5 parameters to the configuration file for options related to computing
     bootstrap confidence intervals.
   - Add "rank_corr_flag" configuration parameter to disable the computation of
     Spearman's Rank Correlation Coefficient and Kendall's Tau Correlation
     Coefficient to improve runtime performance.
   - Add "tmp_dir" configuration parameter to specify the directory where
     temporary files should be written by Point-Stat.
   - Allow the "mask_grids" configuration parameter to be set to "FULL" to
     indicate that statistics should be computed over the entire domain.

- MODE
   - Add "met_data_dir" configuration parameter to point to the location of
     static data files MODE needs for plotting.  It should be set if MODE is
     moved from its original installation directory.
   - Enhance the way colorbars are plotted in the PostScript output and add a
     "stride_length" configuration parameter to indicate how often labels should
     be plotted alongside the colorbar.

- VSDB-Analysis
   - Add job type "vsdb_job_aggr_mpr" to process the matched pair output data
     from Point-Stat.
   - Add 6 parameters to the configuration file for options related to computing
     bootstrap confidence intervals.
   - Add "init_hour" configuration parameter to filter out data by the model
     initialization hour.
   - Add "rank_corr_flag" configuration parameter to disable the computation of
     Spearman's Rank Correlation Coefficient and Kendall's Tau Correlation
     Coefficient to improve runtime performance.

- MODE-Analysis
   - Add "version" configuration parameter to store the version number.

Version 1.0 Release Notes:
-------------------------
- Library code
  - Modified the configuration file parser code.  The formats of all of the
    configuration files in MET have changed since the Beta release.  The
    version of the configuration files in the data/config or scripts/config
    directories  must be used with METv1.0. 

- PB2NC
  - Support message type strings "ANYAIR", "ANYSFC", and "ONLYSF".  See the
    default configuration file for details.
  - Change "multiple_quality_marks_flag" to "event_stack_flag" in the
    configuration file.  See section 3.5.2 for more information.
  - Retrieve the data level category value from the bottom of the event stack
    which is the only place it is defined.
  - Derive additional observation variables, such as dewpoint temperature, wind
    speed, relative humidity, mixing ratio, and pressure-reduced to mean sea
    level.
  - Correct units for specific humidity.

- PCP-Combine
  - Change the format of the input date/time.

- Point-Stat
  - Support message type strings "ANYAIR", "ANYSFC", and "ONLYSF".  See the
    default configuration file for details.
  - Add "mask_stations" to the configuration file to perform verification at
    individual stations.
  - Derive wind speed in the forecast field from the U and V components of wind.
  - Compute additional continuous statistics, such as Spearman rank correlation
    coefficient, Kendall's Tau statistic.
  - Add the least-squares interpolation method.
  - Add confidence intervals for several categorical statistics.
  - Climatology files now correctly being accepted.
  - Fix a problem with rotating winds from grid-relative coordinates to
    earth-relative coordinates.
  - Make changes to the output file format (refer to Chapter 4 of the MET User's
    Guide).
  - Make changes to the output file names (by valid time, not init time).

- Grid-Stat
  - Enhance the NetCDF output file.  In addition to the forecast-observation
    difference, the raw forecast and observation fields are included.
  - Add "interp_method" and "interp_width" to the configuration file to
    optionally smooth the forecast field prior to performing verification.
  - Compute additional continuous statistics, such as Spearman rank correlation
    coefficient, Kendall's Tau statistic.
  - Add confidence intervals for several categorical statistics.
  - Fix a problem with rotating winds from grid-relative coordinates to
    earth-relative coordinates.
  - Make changes to output file format (refer to Chapter 5 of the MET User's
    Guide).
  - Make changes to the output file names (by valid time, not init time).

- MODE
  - Change "vx_grib_code" to "fcst_grib_code" and "obs_grib_code" in the
    configuration file to derive and compare objects from different raw fields.
  - Change "raw_color_table" to "fcst_raw_color_table" and "obs_raw_color_table"
    in the configuration file to plot the raw fields using different
    colortables.
  - Add "fcst/obs_raw_plot_min" and "fcst/obs_raw_plot_max" to the configuration
    file to rescale the raw colortables using the range specified.
  - Add "plot_valid_flag" to the configuration file to plot only the region of
    the input fields containing valid data.
  - Add "plot_gcarc_flag" to the configuration file to enable polyline to be
    plotted using great circle arcs or straight line segments in the grid.
  - Make changes to the output file format and column names (refer to Chapter 6
    of the MET User's Guide).
  - Make changes to the output file names (by valid time, not init time).

- Analysis tools
  - VSDB and MODE analysis tools are now available.

Beta1 Release Notes:
-------------------
- Initial release of the code.
